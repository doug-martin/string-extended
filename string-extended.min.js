/*! string-extended - v0.0.3 - 2013-01-22
* Copyright (c) 2013 Doug Martin; Licensed MIT */
(function(){"use strict";function e(e,t,n){function l(e,t){var n=e;if(a.test(t)){var r=t.match(a),i=r[1],s=r[3],o=r[4];o&&(o=parseInt(o,10),n.length<o?n=v(n,o,s,i):n=m(n,o))}return n}function c(e,n){var r;if(!t.isNumber(e))throw new Error("stringExtended.format : when using %d the parameter must be a number!");r=""+e;if(a.test(n)){var i=n.match(a),s=i[1],o=i[2],u=i[3],f=i[4];o&&(r=(e>0?"+":"")+r),f&&(f=parseInt(f,10),r.length<f?r=v(r,f,u||"0",s):r=m(r,f))}return r}function h(e,t){var n,i=t.match(f),s=0;i&&(s=parseInt(i[0],10),isNaN(s)&&(s=0));try{n=r(e,null,s)}catch(o){throw new Error("stringExtended.format : Unable to parse json from ",e)}return n}function v(e,t,n,r){e=""+e,n=n||" ";var i=e.length;while(i<t)r?e+=n:e=n+e,i++;return e}function m(e,n,r){var i=e;if(t.isString(i)){if(e.length>n)if(r){var s=e.length;i=e.substring(s-n,s)}else i=e.substring(0,n)}else i=m(""+i,n);return i}function g(e,a){if(a instanceof Array){var f=0,p=a.length;return e.replace(o,function(e,t,i){var s,o;if(f<p){s=a[f++];if(e==="%s"||e==="%d"||e==="%D")o=s+"";else if(e==="%Z")o=s.toUTCString();else if(e==="%j")try{o=r(s)}catch(u){throw new Error("stringExtended.format : Unable to parse json from ",s)}else{t=t.replace(/^\[|\]$/g,"");switch(i){case"s":o=l(s,t);break;case"d":o=c(s,t);break;case"j":o=h(s,t);break;case"D":o=n.format(s,t);break;case"Z":o=n.format(s,t,!0)}}return o}return e})}if(i(a))return e.replace(u,function(e,r,i){i=a[i];if(!t.isUndefined(i)){if(!r)return""+i;if(t.isString(i))return l(i,r);if(t.isNumber(i))return c(i,r);if(t.isDate(i))return n.format(i,r);if(t.isObject(i))return h(i,r)}return e});var d=s.call(arguments).slice(1);return g(e,d)}function y(e,t){var n=[];return e&&(e.indexOf(t)>0?n=e.replace(/\s+/g,"").split(t):n.push(e)),n}function b(e,t){var n=[];if(t)for(var r=0;r<t;r++)n.push(e);return n.join("")}function w(e,n){var r,i,s;if(n)if(t.isArray(e)){r=[];for(i=0,s=e.length;i<s;i++)r.push(w(e[i],n))}else if(n instanceof Array){r=e;for(i=0,s=n.length;i<s;i++)r=w(r,n[i])}else n in p&&(r="["+p[n]+"m"+e+"[0m");return r}var r;typeof JSON=="undefined"?function(){function e(e){return e<10?"0"+e:e}function i(r){return t.isDate(r)?isFinite(r.valueOf())?r.getUTCFullYear()+"-"+e(r.getUTCMonth()+1)+"-"+e(r.getUTCDate())+"T"+e(r.getUTCHours())+":"+e(r.getUTCMinutes())+":"+e(r.getUTCSeconds())+"Z":null:n(r)?r.valueOf():r}function c(e){return o.lastIndex=0,o.test(e)?'"'+e.replace(o,function(e){var t=f[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function h(e,t){var n,r,s,o,f=u,p,d=t[e];d&&(d=i(d)),typeof l=="function"&&(d=l.call(t,e,d));switch(typeof d){case"string":return c(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";u+=a,p=[];if(Object.prototype.toString.apply(d)==="[object Array]"){o=d.length;for(n=0;n<o;n+=1)p[n]=h(n,d)||"null";return s=p.length===0?"[]":u?"[\n"+u+p.join(",\n"+u)+"\n"+f+"]":"["+p.join(",")+"]",u=f,s}if(l&&typeof l=="object"){o=l.length;for(n=0;n<o;n+=1)typeof l[n]=="string"&&(r=l[n],s=h(r,d),s&&p.push(c(r)+(u?": ":":")+s))}else for(r in d)Object.prototype.hasOwnProperty.call(d,r)&&(s=h(r,d),s&&p.push(c(r)+(u?": ":":")+s));return s=p.length===0?"{}":u?"{\n"+u+p.join(",\n"+u)+"\n"+f+"}":"{"+p.join(",")+"}",u=f,s}}var n=t.tester().isString().isNumber().isBoolean().tester(),s=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u,a,f={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;r=function(e,t,n){var r;u="",a="";if(typeof n=="number")for(r=0;r<n;r+=1)a+=" ";else typeof n=="string"&&(a=n);l=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return h("",{"":e});throw new Error("JSON.stringify")}}():r=JSON.stringify;var i=t.isHash,s=Array.prototype.slice,o=/%((?:-?\+?.?\d*)?|(?:\[[^\[|\]]*\]))?([sjdDZ])/g,u=/\{(?:\[([^\[|\]]*)\])?(\w+)\}/g,a=/(-?)(\+?)([A-Z|a-z|\W]?)([1-9][0-9]*)?$/,f=/([1-9][0-9]*)$/g,p={bold:1,bright:1,italic:3,underline:4,blink:5,inverse:7,crossedOut:9,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37,redBackground:41,greenBackground:42,yellowBackground:43,blueBackground:44,magentaBackground:45,cyanBackground:46,whiteBackground:47,encircled:52,overlined:53,grey:90,black:90},d={SMILEY:"☺",SOLID_SMILEY:"☻",HEART:"♥",DIAMOND:"♦",CLOVE:"♣",SPADE:"♠",DOT:"•",SQUARE_CIRCLE:"◘",CIRCLE:"○",FILLED_SQUARE_CIRCLE:"◙",MALE:"♂",FEMALE:"♀",EIGHT_NOTE:"♪",DOUBLE_EIGHTH_NOTE:"♫",SUN:"☼",PLAY:"►",REWIND:"◄",UP_DOWN:"↕",PILCROW:"¶",SECTION:"§",THICK_MINUS:"▬",SMALL_UP_DOWN:"↨",UP_ARROW:"↑",DOWN_ARROW:"↓",RIGHT_ARROW:"→",LEFT_ARROW:"←",RIGHT_ANGLE:"∟",LEFT_RIGHT_ARROW:"↔",TRIANGLE:"▲",DOWN_TRIANGLE:"▼",HOUSE:"⌂",C_CEDILLA:"Ç",U_UMLAUT:"ü",E_ACCENT:"é",A_LOWER_CIRCUMFLEX:"â",A_LOWER_UMLAUT:"ä",A_LOWER_GRAVE_ACCENT:"à",A_LOWER_CIRCLE_OVER:"å",C_LOWER_CIRCUMFLEX:"ç",E_LOWER_CIRCUMFLEX:"ê",E_LOWER_UMLAUT:"ë",E_LOWER_GRAVE_ACCENT:"è",I_LOWER_UMLAUT:"ï",I_LOWER_CIRCUMFLEX:"î",I_LOWER_GRAVE_ACCENT:"ì",A_UPPER_UMLAUT:"Ä",A_UPPER_CIRCLE:"Å",E_UPPER_ACCENT:"É",A_E_LOWER:"æ",A_E_UPPER:"Æ",O_LOWER_CIRCUMFLEX:"ô",O_LOWER_UMLAUT:"ö",O_LOWER_GRAVE_ACCENT:"ò",U_LOWER_CIRCUMFLEX:"û",U_LOWER_GRAVE_ACCENT:"ù",Y_LOWER_UMLAUT:"ÿ",O_UPPER_UMLAUT:"Ö",U_UPPER_UMLAUT:"Ü",CENTS:"¢",POUND:"£",YEN:"¥",CURRENCY:"¤",PTS:"₧",FUNCTION:"ƒ",A_LOWER_ACCENT:"á",I_LOWER_ACCENT:"í",O_LOWER_ACCENT:"ó",U_LOWER_ACCENT:"ú",N_LOWER_TILDE:"ñ",N_UPPER_TILDE:"Ñ",A_SUPER:"ª",O_SUPER:"º",UPSIDEDOWN_QUESTION:"¿",SIDEWAYS_L:"⌐",NEGATION:"¬",ONE_HALF:"½",ONE_FOURTH:"¼",UPSIDEDOWN_EXCLAMATION:"¡",DOUBLE_LEFT:"«",DOUBLE_RIGHT:"»",LIGHT_SHADED_BOX:"░",MEDIUM_SHADED_BOX:"▒",DARK_SHADED_BOX:"▓",VERTICAL_LINE:"│",MAZE__SINGLE_RIGHT_T:"┤",MAZE_SINGLE_RIGHT_TOP:"┐",MAZE_SINGLE_RIGHT_BOTTOM_SMALL:"┘",MAZE_SINGLE_LEFT_TOP_SMALL:"┌",MAZE_SINGLE_LEFT_BOTTOM_SMALL:"└",MAZE_SINGLE_LEFT_T:"├",MAZE_SINGLE_BOTTOM_T:"┴",MAZE_SINGLE_TOP_T:"┬",MAZE_SINGLE_CENTER:"┼",MAZE_SINGLE_HORIZONTAL_LINE:"─",MAZE_SINGLE_RIGHT_DOUBLECENTER_T:"╡",MAZE_SINGLE_RIGHT_DOUBLE_BL:"╛",MAZE_SINGLE_RIGHT_DOUBLE_T:"╢",MAZE_SINGLE_RIGHT_DOUBLEBOTTOM_TOP:"╖",MAZE_SINGLE_RIGHT_DOUBLELEFT_TOP:"╕",MAZE_SINGLE_LEFT_DOUBLE_T:"╞",MAZE_SINGLE_BOTTOM_DOUBLE_T:"╧",MAZE_SINGLE_TOP_DOUBLE_T:"╤",MAZE_SINGLE_TOP_DOUBLECENTER_T:"╥",MAZE_SINGLE_BOTTOM_DOUBLECENTER_T:"╨",MAZE_SINGLE_LEFT_DOUBLERIGHT_BOTTOM:"╘",MAZE_SINGLE_LEFT_DOUBLERIGHT_TOP:"╒",MAZE_SINGLE_LEFT_DOUBLEBOTTOM_TOP:"╓",MAZE_SINGLE_LEFT_DOUBLETOP_BOTTOM:"╙",MAZE_SINGLE_LEFT_TOP:"Γ",MAZE_SINGLE_RIGHT_BOTTOM:"╜",MAZE_SINGLE_LEFT_CENTER:"╟",MAZE_SINGLE_DOUBLECENTER_CENTER:"╫",MAZE_SINGLE_DOUBLECROSS_CENTER:"╪",MAZE_DOUBLE_LEFT_CENTER:"╣",MAZE_DOUBLE_VERTICAL:"║",MAZE_DOUBLE_RIGHT_TOP:"╗",MAZE_DOUBLE_RIGHT_BOTTOM:"╝",MAZE_DOUBLE_LEFT_BOTTOM:"╚",MAZE_DOUBLE_LEFT_TOP:"╔",MAZE_DOUBLE_BOTTOM_T:"╩",MAZE_DOUBLE_TOP_T:"╦",MAZE_DOUBLE_LEFT_T:"╠",MAZE_DOUBLE_HORIZONTAL:"═",MAZE_DOUBLE_CROSS:"╬",SOLID_RECTANGLE:"█",THICK_LEFT_VERTICAL:"▌",THICK_RIGHT_VERTICAL:"▐",SOLID_SMALL_RECTANGLE_BOTTOM:"▄",SOLID_SMALL_RECTANGLE_TOP:"▀",PHI_UPPER:"Φ",INFINITY:"∞",INTERSECTION:"∩",DEFINITION:"≡",PLUS_MINUS:"±",GT_EQ:"≥",LT_EQ:"≤",THEREFORE:"⌠",SINCE:"∵",DOESNOT_EXIST:"∄",EXISTS:"∃",FOR_ALL:"∀",EXCLUSIVE_OR:"⊕",BECAUSE:"⌡",DIVIDE:"÷",APPROX:"≈",DEGREE:"°",BOLD_DOT:"∙",DOT_SMALL:"·",CHECK:"√",ITALIC_X:"✗",SUPER_N:"ⁿ",SQUARED:"²",CUBED:"³",SOLID_BOX:"■",PERMILE:"‰",REGISTERED_TM:"®",COPYRIGHT:"©",TRADEMARK:"™",BETA:"β",GAMMA:"γ",ZETA:"ζ",ETA:"η",IOTA:"ι",KAPPA:"κ",LAMBDA:"λ",NU:"ν",XI:"ξ",OMICRON:"ο",RHO:"ρ",UPSILON:"υ",CHI_LOWER:"φ",CHI_UPPER:"χ",PSI:"ψ",ALPHA:"α",ESZETT:"ß",PI:"π",SIGMA_UPPER:"Σ",SIGMA_LOWER:"σ",MU:"µ",TAU:"τ",THETA:"Θ",OMEGA:"Ω",DELTA:"δ",PHI_LOWER:"φ",EPSILON:"ε"},E={toArray:y,pad:v,truncate:m,multiply:b,format:g,style:w},S,x=e.define(t.isString,E).define(t.isArray,{style:w});for(S in E)E.hasOwnProperty(S)&&(x[S]=E[S]);return x.characters=d,x}"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports&&(module.exports=e(require("extended"),require("is-extended"),require("date-extended"))):"function"==typeof define?define(["require"],function(t){return e(t("extended"),t("is-extended"),t("date-extended"))}):this.stringExtended=e(this.extended,this.isExtended,this.dateExtended)}).call(this);